(this["webpackJsonpfso2.6-exercise"]=this["webpackJsonpfso2.6-exercise"]||[]).push([[0],{38:function(e,n,t){},73:function(e,n,t){"use strict";t.r(n);var a=t(0),c=t(13),r=t.n(c),o=t(26),i=t(12),s=t(2),u=function(e){var n=e.person,t=e.handleDelete;return Object(s.jsxs)("div",{className:"person",children:[Object(s.jsxs)("span",{className:"person--name",children:[n.name," "]}),Object(s.jsx)("span",{className:"person--number",children:n.number}),Object(s.jsx)("button",{className:"button",onClick:function(){return t(n._id)},children:"Delete"})]})},l=function(e){var n=e.persons,t=e.handleDelete,a=e.filter,c=e.filteredData;return Object(s.jsx)("div",{children:""===a?null===n||void 0===n?void 0:n.map((function(e){return Object(s.jsx)(u,{person:e,handleDelete:t},e._id)})):null===c||void 0===c?void 0:c.map((function(e){return Object(s.jsx)(u,{person:e,handleDelete:t},e._id)}))})},d=t(88),j=t(40),b=t.n(j),f=function(e){var n=e.newName,t=e.newNumber,a=e.handleNameChange,c=e.handleNumberChange,r=e.addName;return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("form",{onSubmit:r,children:[Object(s.jsxs)("div",{children:["name: ",Object(s.jsx)("input",{value:n,onChange:a})]}),Object(s.jsxs)("div",{children:["number: ",Object(s.jsx)("input",{value:t,onChange:c})]}),Object(s.jsx)("div",{children:Object(s.jsx)(d.a,{variant:"contained",color:"primary",size:"small",startIcon:Object(s.jsx)(b.a,{}),type:"submit",children:"Add"})})]})})},m=t(17),h=t.n(m),O="/api/persons",p=function(e){return h.a.post(O,e).then((function(e){return e.data}))},v=function(e){return h.a.delete("".concat(O,"/").concat(e)).then((function(e){return e.data}))},x=function(e,n){return h.a.put("".concat(O,"/").concat(e),n).then((function(e){return e.data}))},g=t(41),N=t.n(g),w=(t(38),function(e){var n=e.message;return null===n?null:Object(s.jsx)("div",{className:"error",children:n})}),D=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],c=n[1],r=Object(a.useState)(""),u=Object(i.a)(r,2),d=u[0],j=u[1],b=Object(a.useState)(""),m=Object(i.a)(b,2),O=m[0],g=m[1],D=Object(a.useState)([]),C=Object(i.a)(D,2),y=C[0],S=C[1],_=Object(a.useState)(""),k=Object(i.a)(_,2),I=k[0],A=k[1],E=Object(a.useState)(null),F=Object(i.a)(E,2),J=F[0],L=F[1],z=function(){setTimeout((function(){L(null)}),5e3)},B=function(){h.a.get("/api/persons").then((function(e){console.log("promise fulfilled"),c(e.data),console.log(e.data)}))};Object(a.useEffect)(B,[]);return Object(s.jsxs)("div",{className:"container",children:[Object(s.jsx)("h2",{children:"Orange Kitty's Phonebook"}),Object(s.jsx)(w,{message:J}),Object(s.jsxs)("div",{className:"searchInputs",children:[Object(s.jsx)("p",{children:"Filtered list"}),Object(s.jsx)("input",{className:"input",type:"text",onChange:function(e){A(e.target.value),console.log(e.target.value);var n=t.filter((function(n){return n.name.toLowerCase().includes(e.target.value.toLowerCase())}));S(n)}}),Object(s.jsx)(N.a,{id:"searchIcon"})]}),Object(s.jsx)("h2",{children:"Add New"}),Object(s.jsx)(f,{newName:d,newNumber:O,handleNumberChange:function(e){g(e.target.value)},handleNameChange:function(e){j(e.target.value)},addName:function(e){e.preventDefault();var n={name:d,number:O},a=t.some((function(e){return e.name===d}));if(""!==d){if(a){var r=t.find((function(e){return e.name===d})),i=Object(o.a)(Object(o.a)({},r),{},{number:O}),s=r.id;return O.length<8?(L("".concat(O," is too short, please provide a number with at least 8 digits")),void z()):(window.confirm("".concat(d," is already added to phonebook, replace the old number with a new one?"))&&(console.log(r._id),x(r._id,i).then((function(e){c(t.map((function(n){return n._id!==s?n:e}))),L("Updated number for ".concat(r.name)),z()})).catch((function(e){console.log(e.response.data),L("Information for ".concat(r.name," has already been removed from server")),c(t.filter((function(e){return e.id!==s}))),z()}))),j(""),void g(""))}p(n).then((function(e){c(t.concat(e)),L("Added ".concat(e.name)),z(),j(""),g(""),B()})).catch((function(e){console.log(e.response.data),L(e.response.data.error),z()}))}}}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)(l,{persons:t,handleDelete:function(e){var n=t.find((function(n){return n._id===e}));window.confirm("Delete ".concat(n.name,"?"))&&v(e).then((function(){var a=t.filter((function(n){return n.id!==e}));c(a),L("Deleted ".concat(n.name)),B(),z()}))},filteredData:y,filter:I})]})};r.a.render(Object(s.jsx)(D,{}),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.83319358.chunk.js.map